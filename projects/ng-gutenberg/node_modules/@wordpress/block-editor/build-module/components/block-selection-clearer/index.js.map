{"version":3,"sources":["@wordpress/block-editor/src/components/block-selection-clearer/index.js"],"names":["omit","Component","withSelect","withDispatch","compose","BlockSelectionClearer","arguments","bindContainer","bind","clearSelectionIfFocusTarget","ref","container","event","props","hasSelectedBlock","hasMultiSelection","clearSelectedBlock","hasSelection","target","select","dispatch"],"mappings":";;;;;;;;;AAAA;;;AAGA,SAASA,IAAT,QAAqB,QAArB;AAEA;;;;AAGA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,UAAT,EAAqBC,YAArB,QAAyC,iBAAzC;AACA,SAASC,OAAT,QAAwB,oBAAxB;;IAEMC,qB;;;;;AACL,mCAAc;AAAA;;AAAA;;AACb,gGAAUC,SAAV;AAEA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBC,IAAnB,+BAArB;AACA,UAAKC,2BAAL,GAAmC,MAAKA,2BAAL,CAAiCD,IAAjC,+BAAnC;AAJa;AAKb;;;;kCAEcE,G,EAAM;AACpB,WAAKC,SAAL,GAAiBD,GAAjB;AACA;AAED;;;;;;;;;;gDAO6BE,K,EAAQ;AAAA,wBAKhC,KAAKC,KAL2B;AAAA,UAEnCC,gBAFmC,eAEnCA,gBAFmC;AAAA,UAGnCC,iBAHmC,eAGnCA,iBAHmC;AAAA,UAInCC,kBAJmC,eAInCA,kBAJmC;AAOpC,UAAMC,YAAY,GAAKH,gBAAgB,IAAIC,iBAA3C;;AACA,UAAKH,KAAK,CAACM,MAAN,KAAiB,KAAKP,SAAtB,IAAmCM,YAAxC,EAAuD;AACtDD,QAAAA,kBAAkB;AAClB;AACD;;;6BAEQ;AACR,aACC;AACC,QAAA,QAAQ,EAAG,CAAC,CADb;AAEC,QAAA,OAAO,EAAG,KAAKP,2BAFhB;AAGC,QAAA,GAAG,EAAG,KAAKF;AAHZ,SAIMP,IAAI,CAAE,KAAKa,KAAP,EAAc,CACtB,oBADsB,EAEtB,kBAFsB,EAGtB,mBAHsB,CAAd,CAJV,EADD;AAYA;;;;EA7CkCZ,S;;AAgDpC,eAAeG,OAAO,CAAE,CACvBF,UAAU,CAAE,UAAEiB,MAAF,EAAc;AAAA,gBACuBA,MAAM,CAAE,mBAAF,CAD7B;AAAA,MACjBL,gBADiB,WACjBA,gBADiB;AAAA,MACCC,iBADD,WACCA,iBADD;;AAGzB,SAAO;AACND,IAAAA,gBAAgB,EAAEA,gBAAgB,EAD5B;AAENC,IAAAA,iBAAiB,EAAEA,iBAAiB;AAF9B,GAAP;AAIA,CAPS,CADa,EASvBZ,YAAY,CAAE,UAAEiB,QAAF,EAAgB;AAAA,kBACEA,QAAQ,CAAE,mBAAF,CADV;AAAA,MACrBJ,kBADqB,aACrBA,kBADqB;;AAE7B,SAAO;AAAEA,IAAAA,kBAAkB,EAAlBA;AAAF,GAAP;AACA,CAHW,CATW,CAAF,CAAP,CAaVX,qBAbU,CAAf","sourcesContent":["/**\n * External dependencies\n */\nimport { omit } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\nclass BlockSelectionClearer extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.bindContainer = this.bindContainer.bind( this );\n\t\tthis.clearSelectionIfFocusTarget = this.clearSelectionIfFocusTarget.bind( this );\n\t}\n\n\tbindContainer( ref ) {\n\t\tthis.container = ref;\n\t}\n\n\t/**\n\t * Clears the selected block on focus if the container is the target of the\n\t * focus. This assumes no other descendents have received focus until event\n\t * has bubbled to the container.\n\t *\n\t * @param {FocusEvent} event Focus event.\n\t */\n\tclearSelectionIfFocusTarget( event ) {\n\t\tconst {\n\t\t\thasSelectedBlock,\n\t\t\thasMultiSelection,\n\t\t\tclearSelectedBlock,\n\t\t} = this.props;\n\n\t\tconst hasSelection = ( hasSelectedBlock || hasMultiSelection );\n\t\tif ( event.target === this.container && hasSelection ) {\n\t\t\tclearSelectedBlock();\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\ttabIndex={ -1 }\n\t\t\t\tonFocus={ this.clearSelectionIfFocusTarget }\n\t\t\t\tref={ this.bindContainer }\n\t\t\t\t{ ...omit( this.props, [\n\t\t\t\t\t'clearSelectedBlock',\n\t\t\t\t\t'hasSelectedBlock',\n\t\t\t\t\t'hasMultiSelection',\n\t\t\t\t] ) }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { hasSelectedBlock, hasMultiSelection } = select( 'core/block-editor' );\n\n\t\treturn {\n\t\t\thasSelectedBlock: hasSelectedBlock(),\n\t\t\thasMultiSelection: hasMultiSelection(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { clearSelectedBlock } = dispatch( 'core/block-editor' );\n\t\treturn { clearSelectedBlock };\n\t} ),\n] )( BlockSelectionClearer );\n"]}