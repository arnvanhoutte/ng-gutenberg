{"version":3,"sources":["@wordpress/block-editor/src/components/block-editor-keyboard-shortcuts/index.js"],"names":["preventDefault","event","shortcuts","duplicate","raw","rawShortcut","primaryShift","display","displayShortcut","removeBlock","access","insertBefore","primaryAlt","insertAfter","BlockEditorKeyboardShortcuts","arguments","selectAll","bind","deleteSelectedBlocks","clearMultiSelection","props","rootBlocksClientIds","onMultiSelect","selectedBlockClientIds","hasMultiSelection","onRemove","isLocked","clearSelectedBlock","window","getSelection","removeAllRanges","primary","length","onDuplicate","onInsertAfter","onInsertBefore","Component","select","getBlockOrder","getSelectedBlockClientIds","getBlockRootClientId","getTemplateLock","clientId","dispatch","multiSelect","removeBlocks"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { first, last, some, flow } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { KeyboardShortcuts } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { rawShortcut, displayShortcut } from '@wordpress/keycodes';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockActions from '../block-actions';\n\nconst preventDefault = ( event ) => {\n\tevent.preventDefault();\n\treturn event;\n};\n\nexport const shortcuts = {\n\tduplicate: {\n\t\traw: rawShortcut.primaryShift( 'd' ),\n\t\tdisplay: displayShortcut.primaryShift( 'd' ),\n\t},\n\tremoveBlock: {\n\t\traw: rawShortcut.access( 'z' ),\n\t\tdisplay: displayShortcut.access( 'z' ),\n\t},\n\tinsertBefore: {\n\t\traw: rawShortcut.primaryAlt( 't' ),\n\t\tdisplay: displayShortcut.primaryAlt( 't' ),\n\t},\n\tinsertAfter: {\n\t\traw: rawShortcut.primaryAlt( 'y' ),\n\t\tdisplay: displayShortcut.primaryAlt( 'y' ),\n\t},\n};\n\nclass BlockEditorKeyboardShortcuts extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.selectAll = this.selectAll.bind( this );\n\t\tthis.deleteSelectedBlocks = this.deleteSelectedBlocks.bind( this );\n\t\tthis.clearMultiSelection = this.clearMultiSelection.bind( this );\n\t}\n\n\tselectAll( event ) {\n\t\tconst { rootBlocksClientIds, onMultiSelect } = this.props;\n\t\tevent.preventDefault();\n\t\tonMultiSelect( first( rootBlocksClientIds ), last( rootBlocksClientIds ) );\n\t}\n\n\tdeleteSelectedBlocks( event ) {\n\t\tconst { selectedBlockClientIds, hasMultiSelection, onRemove, isLocked } = this.props;\n\t\tif ( hasMultiSelection ) {\n\t\t\tevent.preventDefault();\n\t\t\tif ( ! isLocked ) {\n\t\t\t\tonRemove( selectedBlockClientIds );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Clears current multi-selection, if one exists.\n\t */\n\tclearMultiSelection() {\n\t\tconst { hasMultiSelection, clearSelectedBlock } = this.props;\n\t\tif ( hasMultiSelection ) {\n\t\t\tclearSelectedBlock();\n\t\t\twindow.getSelection().removeAllRanges();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { selectedBlockClientIds } = this.props;\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\t[ rawShortcut.primary( 'a' ) ]: this.selectAll,\n\t\t\t\t\t\tbackspace: this.deleteSelectedBlocks,\n\t\t\t\t\t\tdel: this.deleteSelectedBlocks,\n\t\t\t\t\t\tescape: this.clearMultiSelection,\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t{ selectedBlockClientIds.length > 0 && (\n\t\t\t\t\t<BlockActions clientIds={ selectedBlockClientIds }>\n\t\t\t\t\t\t{ ( { onDuplicate, onRemove, onInsertAfter, onInsertBefore } ) => (\n\t\t\t\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\t\t\t\tbindGlobal\n\t\t\t\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\t\t\t\t// Prevents bookmark all Tabs shortcut in Chrome when devtools are closed.\n\t\t\t\t\t\t\t\t\t// Prevents reposition Chrome devtools pane shortcut when devtools are open.\n\t\t\t\t\t\t\t\t\t[ shortcuts.duplicate.raw ]: flow( preventDefault, onDuplicate ),\n\n\t\t\t\t\t\t\t\t\t// Does not clash with any known browser/native shortcuts, but preventDefault\n\t\t\t\t\t\t\t\t\t// is used to prevent any obscure unknown shortcuts from triggering.\n\t\t\t\t\t\t\t\t\t[ shortcuts.removeBlock.raw ]: flow( preventDefault, onRemove ),\n\n\t\t\t\t\t\t\t\t\t// Prevent 'view recently closed tabs' in Opera using preventDefault.\n\t\t\t\t\t\t\t\t\t[ shortcuts.insertBefore.raw ]: flow( preventDefault, onInsertBefore ),\n\n\t\t\t\t\t\t\t\t\t// Does not clash with any known browser/native shortcuts, but preventDefault\n\t\t\t\t\t\t\t\t\t// is used to prevent any obscure unknown shortcuts from triggering.\n\t\t\t\t\t\t\t\t\t[ shortcuts.insertAfter.raw ]: flow( preventDefault, onInsertAfter ),\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</BlockActions>\n\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockOrder,\n\t\t\tgetSelectedBlockClientIds,\n\t\t\thasMultiSelection,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetTemplateLock,\n\t\t} = select( 'core/block-editor' );\n\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\n\t\treturn {\n\t\t\trootBlocksClientIds: getBlockOrder(),\n\t\t\thasMultiSelection: hasMultiSelection(),\n\t\t\tisLocked: some(\n\t\t\t\tselectedBlockClientIds,\n\t\t\t\t( clientId ) => !! getTemplateLock( getBlockRootClientId( clientId ) )\n\t\t\t),\n\t\t\tselectedBlockClientIds,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst {\n\t\t\tclearSelectedBlock,\n\t\t\tmultiSelect,\n\t\t\tremoveBlocks,\n\t\t} = dispatch( 'core/block-editor' );\n\n\t\treturn {\n\t\t\tclearSelectedBlock,\n\t\t\tonMultiSelect: multiSelect,\n\t\t\tonRemove: removeBlocks,\n\t\t};\n\t} ),\n] )( BlockEditorKeyboardShortcuts );\n"]}