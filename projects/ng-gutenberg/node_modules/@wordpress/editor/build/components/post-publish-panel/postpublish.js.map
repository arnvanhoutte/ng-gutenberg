{"version":3,"sources":["@wordpress/editor/src/components/post-publish-panel/postpublish.js"],"names":["PostPublishPanelPostpublish","arguments","state","showCopyConfirmation","onCopy","bind","onSelectInput","postLink","props","focusOnMount","current","focus","clearTimeout","dismissCopyConfirmation","setState","setTimeout","event","target","select","children","isScheduled","post","postType","postLabel","viewPostLabel","postPublishNonLinkHeader","link","title","Component","getEditedPostAttribute","getCurrentPost","isCurrentPostScheduled","getPostType"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { PanelBody, Button, ClipboardButton, TextControl } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Component, createRef } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\nimport { safeDecodeURIComponent } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport PostScheduleLabel from '../post-schedule/label';\n\nclass PostPublishPanelPostpublish extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tshowCopyConfirmation: false,\n\t\t};\n\t\tthis.onCopy = this.onCopy.bind( this );\n\t\tthis.onSelectInput = this.onSelectInput.bind( this );\n\t\tthis.postLink = createRef();\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( this.props.focusOnMount ) {\n\t\t\tthis.postLink.current.focus();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout( this.dismissCopyConfirmation );\n\t}\n\n\tonCopy() {\n\t\tthis.setState( {\n\t\t\tshowCopyConfirmation: true,\n\t\t} );\n\n\t\tclearTimeout( this.dismissCopyConfirmation );\n\t\tthis.dismissCopyConfirmation = setTimeout( () => {\n\t\t\tthis.setState( {\n\t\t\t\tshowCopyConfirmation: false,\n\t\t\t} );\n\t\t}, 4000 );\n\t}\n\n\tonSelectInput( event ) {\n\t\tevent.target.select();\n\t}\n\n\trender() {\n\t\tconst { children, isScheduled, post, postType } = this.props;\n\t\tconst postLabel = get( postType, [ 'labels', 'singular_name' ] );\n\t\tconst viewPostLabel = get( postType, [ 'labels', 'view_item' ] );\n\n\t\tconst postPublishNonLinkHeader = isScheduled ?\n\t\t\t<>{ __( 'is now scheduled. It will go live on' ) } <PostScheduleLabel />.</> :\n\t\t\t__( 'is now live.' );\n\n\t\treturn (\n\t\t\t<div className=\"post-publish-panel__postpublish\">\n\t\t\t\t<PanelBody className=\"post-publish-panel__postpublish-header\">\n\t\t\t\t\t<a ref={ this.postLink } href={ post.link }>{ post.title || __( '(no title)' ) }</a> { postPublishNonLinkHeader }\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody>\n\t\t\t\t\t<p className=\"post-publish-panel__postpublish-subheader\">\n\t\t\t\t\t\t<strong>{ __( 'Whatâ€™s next?' ) }</strong>\n\t\t\t\t\t</p>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tclassName=\"post-publish-panel__postpublish-post-address\"\n\t\t\t\t\t\treadOnly\n\t\t\t\t\t\tlabel={ sprintf(\n\t\t\t\t\t\t\t/* translators: %s: post type singular name */\n\t\t\t\t\t\t\t__( '%s address' ), postLabel\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tvalue={ safeDecodeURIComponent( post.link ) }\n\t\t\t\t\t\tonFocus={ this.onSelectInput }\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"post-publish-panel__postpublish-buttons\">\n\t\t\t\t\t\t{ ! isScheduled && (\n\t\t\t\t\t\t\t<Button isDefault href={ post.link }>\n\t\t\t\t\t\t\t\t{ viewPostLabel }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t) }\n\n\t\t\t\t\t\t<ClipboardButton isDefault text={ post.link } onCopy={ this.onCopy }>\n\t\t\t\t\t\t\t{ this.state.showCopyConfirmation ? __( 'Copied!' ) : __( 'Copy Link' ) }\n\t\t\t\t\t\t</ClipboardButton>\n\t\t\t\t\t</div>\n\t\t\t\t</PanelBody>\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withSelect( ( select ) => {\n\tconst { getEditedPostAttribute, getCurrentPost, isCurrentPostScheduled } = select( 'core/editor' );\n\tconst { getPostType } = select( 'core' );\n\n\treturn {\n\t\tpost: getCurrentPost(),\n\t\tpostType: getPostType( getEditedPostAttribute( 'type' ) ),\n\t\tisScheduled: isCurrentPostScheduled(),\n\t};\n} )( PostPublishPanelPostpublish );\n"]}