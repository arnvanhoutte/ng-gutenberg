{"version":3,"sources":["@wordpress/editor/src/components/post-permalink/editor.js"],"names":["withDispatch","withSelect","Component","__","Button","compose","cleanForSlug","PostPermalinkEditor","permalinkParts","slug","arguments","state","editedPostName","postName","onSavePermalink","bind","event","preventDefault","props","onSave","editPost","setState","prefix","suffix","target","value","select","getPermalinkParts","dispatch"],"mappings":";;;;;;;;AAAA;;;AAGA,SAASA,YAAT,EAAuBC,UAAvB,QAAyC,iBAAzC;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,EAAT,QAAmB,iBAAnB;AACA,SAASC,MAAT,QAAuB,uBAAvB;AACA,SAASC,OAAT,QAAwB,oBAAxB;AAEA;;;;AAGA,SAASC,YAAT,QAA6B,iBAA7B;;IAEMC,mB;;;;;AACL,qCAAwC;AAAA;;AAAA,QAAzBC,cAAyB,QAAzBA,cAAyB;AAAA,QAATC,IAAS,QAATA,IAAS;;AAAA;;AACvC,8FAAUC,SAAV;AAEA,UAAKC,KAAL,GAAa;AACZC,MAAAA,cAAc,EAAEH,IAAI,IAAID,cAAc,CAACK;AAD3B,KAAb;AAIA,UAAKC,eAAL,GAAuB,MAAKA,eAAL,CAAqBC,IAArB,+BAAvB;AAPuC;AAQvC;;;;oCAEgBC,K,EAAQ;AACxB,UAAMH,QAAQ,GAAGP,YAAY,CAAE,KAAKK,KAAL,CAAWC,cAAb,CAA7B;AAEAI,MAAAA,KAAK,CAACC,cAAN;AAEA,WAAKC,KAAL,CAAWC,MAAX;;AAEA,UAAKN,QAAQ,KAAK,KAAKK,KAAL,CAAWL,QAA7B,EAAwC;AACvC;AACA;;AAED,WAAKK,KAAL,CAAWE,QAAX,CAAqB;AACpBX,QAAAA,IAAI,EAAEI;AADc,OAArB;AAIA,WAAKQ,QAAL,CAAe;AACdT,QAAAA,cAAc,EAAEC;AADF,OAAf;AAGA;;;6BAEQ;AAAA;;AAAA,kCACmB,KAAKK,KAAL,CAAWV,cAD9B;AAAA,UACAc,MADA,yBACAA,MADA;AAAA,UACQC,MADR,yBACQA,MADR;AAAA,UAEAX,cAFA,GAEmB,KAAKD,KAFxB,CAEAC,cAFA;AAIR;AACA;;AACA,aACC;AACC,QAAA,SAAS,EAAC,8BADX;AAEC,QAAA,QAAQ,EAAG,KAAKE;AAFjB,SAIC;AAAM,QAAA,SAAS,EAAC;AAAhB,SACC;AAAM,QAAA,SAAS,EAAC;AAAhB,SACGQ,MADH,CADD,EAIC;AACC,QAAA,SAAS,EAAC,oCADX;AAEC,sBAAanB,EAAE,CAAE,qBAAF,CAFhB;AAGC,QAAA,KAAK,EAAGS,cAHT;AAIC,QAAA,QAAQ,EAAG,kBAAEI,KAAF;AAAA,iBAAa,MAAI,CAACK,QAAL,CAAe;AAAET,YAAAA,cAAc,EAAEI,KAAK,CAACQ,MAAN,CAAaC;AAA/B,WAAf,CAAb;AAAA,SAJZ;AAKC,QAAA,IAAI,EAAC,MALN;AAMC,QAAA,SAAS;AANV,QAJD,EAYC;AAAM,QAAA,SAAS,EAAC;AAAhB,SACGF,MADH,CAZD,WAJD,EAqBC,cAAC,MAAD;AACC,QAAA,SAAS,EAAC,oCADX;AAEC,QAAA,OAAO,MAFR;AAGC,QAAA,OAAO,EAAG,KAAKT;AAHhB,SAKGX,EAAE,CAAE,MAAF,CALL,CArBD,CADD;AA+BA;AACA;;;;EArEgCD,S;;AAwElC,eAAeG,OAAO,CAAE,CACvBJ,UAAU,CAAE,UAAEyB,MAAF,EAAc;AAAA,gBACKA,MAAM,CAAE,aAAF,CADX;AAAA,MACjBC,iBADiB,WACjBA,iBADiB;;AAEzB,SAAO;AACNnB,IAAAA,cAAc,EAAEmB,iBAAiB;AAD3B,GAAP;AAGA,CALS,CADa,EAOvB3B,YAAY,CAAE,UAAE4B,QAAF,EAAgB;AAAA,kBACRA,QAAQ,CAAE,aAAF,CADA;AAAA,MACrBR,QADqB,aACrBA,QADqB;;AAE7B,SAAO;AAAEA,IAAAA,QAAQ,EAARA;AAAF,GAAP;AACA,CAHW,CAPW,CAAF,CAAP,CAWVb,mBAXU,CAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { cleanForSlug } from '../../utils/url';\n\nclass PostPermalinkEditor extends Component {\n\tconstructor( { permalinkParts, slug } ) {\n\t\tsuper( ...arguments );\n\n\t\tthis.state = {\n\t\t\teditedPostName: slug || permalinkParts.postName,\n\t\t};\n\n\t\tthis.onSavePermalink = this.onSavePermalink.bind( this );\n\t}\n\n\tonSavePermalink( event ) {\n\t\tconst postName = cleanForSlug( this.state.editedPostName );\n\n\t\tevent.preventDefault();\n\n\t\tthis.props.onSave();\n\n\t\tif ( postName === this.props.postName ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.props.editPost( {\n\t\t\tslug: postName,\n\t\t} );\n\n\t\tthis.setState( {\n\t\t\teditedPostName: postName,\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst { prefix, suffix } = this.props.permalinkParts;\n\t\tconst { editedPostName } = this.state;\n\n\t\t/* eslint-disable jsx-a11y/no-autofocus */\n\t\t// Autofocus is allowed here, as this mini-UI is only loaded when the user clicks to open it.\n\t\treturn (\n\t\t\t<form\n\t\t\t\tclassName=\"editor-post-permalink-editor\"\n\t\t\t\tonSubmit={ this.onSavePermalink }\n\t\t\t>\n\t\t\t\t<span className=\"editor-post-permalink__editor-container\">\n\t\t\t\t\t<span className=\"editor-post-permalink-editor__prefix\">\n\t\t\t\t\t\t{ prefix }\n\t\t\t\t\t</span>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"editor-post-permalink-editor__edit\"\n\t\t\t\t\t\taria-label={ __( 'Edit post permalink' ) }\n\t\t\t\t\t\tvalue={ editedPostName }\n\t\t\t\t\t\tonChange={ ( event ) => this.setState( { editedPostName: event.target.value } ) }\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t/>\n\t\t\t\t\t<span className=\"editor-post-permalink-editor__suffix\">\n\t\t\t\t\t\t{ suffix }\n\t\t\t\t\t</span>\n\t\t\t\t\t&lrm;\n\t\t\t\t</span>\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"editor-post-permalink-editor__save\"\n\t\t\t\t\tisLarge\n\t\t\t\t\tonClick={ this.onSavePermalink }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Save' ) }\n\t\t\t\t</Button>\n\t\t\t</form>\n\t\t);\n\t\t/* eslint-enable jsx-a11y/no-autofocus */\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { getPermalinkParts } = select( 'core/editor' );\n\t\treturn {\n\t\t\tpermalinkParts: getPermalinkParts(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { editPost } = dispatch( 'core/editor' );\n\t\treturn { editPost };\n\t} ),\n] )( PostPermalinkEditor );\n\n"]}