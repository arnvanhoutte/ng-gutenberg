{"version":3,"sources":["@wordpress/block-library/src/calendar/edit.js"],"names":["CalendarEdit","arguments","getYearMonth","bind","maxSize","getServerSideAttributes","date","momentDate","year","month","attributes","props","Component","select","coreEditorSelect","getEditedPostAttribute","postType","undefined"],"mappings":";;;;;;;;;AAYA;;;;;;;;;;;;;;;;AATA;;AACA;;AAKA;;AAIA;;AACA;;AAdA;;;;AAMA;;;IAUMA,Y;;;;;AACL,0BAAc;AAAA;;AAAA;AACb,mHAAUC,SAAV;AACA,UAAKC,YAAL,GAAoB,qBACnB,MAAKA,YAAL,CAAkBC,IAAlB,6CADmB,EAEnB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAFmB,CAApB;AAIA,UAAKC,uBAAL,GAA+B,qBAC9B,MAAKA,uBAAL,CAA6BF,IAA7B,6CAD8B,EAE9B;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAF8B,CAA/B;AANa;AAUb;;;;iCAEaE,I,EAAO;AACpB,UAAK,CAAEA,IAAP,EAAc;AACb,eAAO,EAAP;AACA;;AACD,UAAMC,UAAU,GAAG,qBAAQD,IAAR,CAAnB;AACA,aAAO;AACNE,QAAAA,IAAI,EAAED,UAAU,CAACC,IAAX,EADA;AAENC,QAAAA,KAAK,EAAEF,UAAU,CAACE,KAAX,KAAqB;AAFtB,OAAP;AAIA;;;4CAEwBC,U,EAAYJ,I,EAAO;AAC3C,6CACII,UADJ,EAEI,KAAKR,YAAL,CAAmBI,IAAnB,CAFJ;AAIA;;;6BAEQ;AACR,aACC,4BAAC,oBAAD,QACC,4BAAC,yBAAD;AACC,QAAA,KAAK,EAAC,eADP;AAEC,QAAA,UAAU,EAAG,KAAKD,uBAAL,CACZ,KAAKM,KAAL,CAAWD,UADC,EAEZ,KAAKC,KAAL,CAAWL,IAFC;AAFd,QADD,CADD;AAWA;;;EA3CyBM,kB;;eA8CZ,sBAAY,UAAEC,MAAF,EAAc;AACxC,MAAMC,gBAAgB,GAAGD,MAAM,CAAE,aAAF,CAA/B;;AACA,MAAK,CAAEC,gBAAP,EAA0B;AACzB;AACA;;AAJuC,MAMvCC,sBANuC,GAOpCD,gBAPoC,CAMvCC,sBANuC;AAQxC,MAAMC,QAAQ,GAAGD,sBAAsB,CAAE,MAAF,CAAvC,CARwC,CASxC;AACA;AACA;;AACA,SAAO;AACNT,IAAAA,IAAI,EAAEU,QAAQ,KAAK,MAAb,GACLD,sBAAsB,CAAE,MAAF,CADjB,GAELE;AAHK,GAAP;AAKA,CAjBc,EAiBVjB,YAjBU,C","sourcesContent":["/**\n * External dependencies\n */\nimport moment from 'moment';\nimport memoize from 'memize';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tDisabled,\n} from '@wordpress/components';\nimport { Component } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\nimport ServerSideRender from '@wordpress/server-side-render';\n\nclass CalendarEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.getYearMonth = memoize(\n\t\t\tthis.getYearMonth.bind( this ),\n\t\t\t{ maxSize: 1 }\n\t\t);\n\t\tthis.getServerSideAttributes = memoize(\n\t\t\tthis.getServerSideAttributes.bind( this ),\n\t\t\t{ maxSize: 1 }\n\t\t);\n\t}\n\n\tgetYearMonth( date ) {\n\t\tif ( ! date ) {\n\t\t\treturn {};\n\t\t}\n\t\tconst momentDate = moment( date );\n\t\treturn {\n\t\t\tyear: momentDate.year(),\n\t\t\tmonth: momentDate.month() + 1,\n\t\t};\n\t}\n\n\tgetServerSideAttributes( attributes, date ) {\n\t\treturn {\n\t\t\t...attributes,\n\t\t\t...this.getYearMonth( date ),\n\t\t};\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Disabled>\n\t\t\t\t<ServerSideRender\n\t\t\t\t\tblock=\"core/calendar\"\n\t\t\t\t\tattributes={ this.getServerSideAttributes(\n\t\t\t\t\t\tthis.props.attributes,\n\t\t\t\t\t\tthis.props.date\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t</Disabled>\n\t\t);\n\t}\n}\n\nexport default withSelect( ( select ) => {\n\tconst coreEditorSelect = select( 'core/editor' );\n\tif ( ! coreEditorSelect ) {\n\t\treturn;\n\t}\n\tconst {\n\t\tgetEditedPostAttribute,\n\t} = coreEditorSelect;\n\tconst postType = getEditedPostAttribute( 'type' );\n\t// Dates are used to overwrite year and month used on the calendar.\n\t// This overwrite should only happen for 'post' post types.\n\t// For other post types the calendar always displays the current month.\n\treturn {\n\t\tdate: postType === 'post' ?\n\t\t\tgetEditedPostAttribute( 'date' ) :\n\t\t\tundefined,\n\t};\n} )( CalendarEdit );\n"]}