{"version":3,"sources":["@wordpress/core-data/src/entities.js"],"names":["loadPostTypeEntities","loadTaxonomyEntities","getKindEntities","upperFirst","camelCase","map","find","addEntities","apiFetch","select","DEFAULT_ENTITY_KEY","defaultEntities","name","kind","key","baseURL","plural","kinds","loadEntities","path","postTypes","postType","rest_base","transientEdits","blocks","mergedEdits","meta","taxonomies","taxonomy","getMethodName","prefix","usePlural","entity","kindPrefix","nameSuffix","suffix","entities","length","kindConfig"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { upperFirst, camelCase, map, find } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport { addEntities } from './actions';\nimport { apiFetch, select } from './controls';\n\nexport const DEFAULT_ENTITY_KEY = 'id';\n\nexport const defaultEntities = [\n\t{ name: 'postType', kind: 'root', key: 'slug', baseURL: '/wp/v2/types' },\n\t{ name: 'media', kind: 'root', baseURL: '/wp/v2/media', plural: 'mediaItems' },\n\t{ name: 'taxonomy', kind: 'root', key: 'slug', baseURL: '/wp/v2/taxonomies', plural: 'taxonomies' },\n\t{ name: 'widgetArea', kind: 'root', baseURL: '/__experimental/widget-areas', plural: 'widgetAreas' },\n];\n\nexport const kinds = [\n\t{ name: 'postType', loadEntities: loadPostTypeEntities },\n\t{ name: 'taxonomy', loadEntities: loadTaxonomyEntities },\n];\n\n/**\n * Returns the list of post type entities.\n *\n * @return {Promise} Entities promise\n */\nfunction* loadPostTypeEntities() {\n\tconst postTypes = yield apiFetch( { path: '/wp/v2/types?context=edit' } );\n\treturn map( postTypes, ( postType, name ) => {\n\t\treturn {\n\t\t\tkind: 'postType',\n\t\t\tbaseURL: '/wp/v2/' + postType.rest_base,\n\t\t\tname,\n\t\t\ttransientEdits: { blocks: true },\n\t\t\tmergedEdits: { meta: true },\n\t\t};\n\t} );\n}\n\n/**\n * Returns the list of the taxonomies entities.\n *\n * @return {Promise} Entities promise\n */\nfunction* loadTaxonomyEntities() {\n\tconst taxonomies = yield apiFetch( { path: '/wp/v2/taxonomies?context=edit' } );\n\treturn map( taxonomies, ( taxonomy, name ) => {\n\t\treturn {\n\t\t\tkind: 'taxonomy',\n\t\t\tbaseURL: '/wp/v2/' + taxonomy.rest_base,\n\t\t\tname,\n\t\t};\n\t} );\n}\n\n/**\n * Returns the entity's getter method name given its kind and name.\n *\n * @param {string}  kind      Entity kind.\n * @param {string}  name      Entity name.\n * @param {string}  prefix    Function prefix.\n * @param {boolean} usePlural Whether to use the plural form or not.\n *\n * @return {string} Method name\n */\nexport const getMethodName = ( kind, name, prefix = 'get', usePlural = false ) => {\n\tconst entity = find( defaultEntities, { kind, name } );\n\tconst kindPrefix = kind === 'root' ? '' : upperFirst( camelCase( kind ) );\n\tconst nameSuffix = upperFirst( camelCase( name ) ) + ( usePlural ? 's' : '' );\n\tconst suffix = usePlural && entity.plural ? upperFirst( camelCase( entity.plural ) ) : nameSuffix;\n\treturn `${ prefix }${ kindPrefix }${ suffix }`;\n};\n\n/**\n * Loads the kind entities into the store.\n *\n * @param {string} kind  Kind\n *\n * @return {Array} Entities\n */\nexport function* getKindEntities( kind ) {\n\tlet entities = yield select( 'getEntitiesByKind', kind );\n\tif ( entities && entities.length !== 0 ) {\n\t\treturn entities;\n\t}\n\n\tconst kindConfig = find( kinds, { name: kind } );\n\tif ( ! kindConfig ) {\n\t\treturn [];\n\t}\n\n\tentities = yield kindConfig.loadEntities();\n\tyield addEntities( entities );\n\n\treturn entities;\n}\n"]}