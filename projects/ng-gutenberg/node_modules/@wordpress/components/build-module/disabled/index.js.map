{"version":3,"sources":["@wordpress/components/src/disabled/index.js"],"names":["includes","debounce","classnames","createContext","Component","focus","Consumer","Provider","DISABLED_ELIGIBLE_NODE_NAMES","Disabled","arguments","bindNode","bind","disable","debouncedDisable","leading","observer","window","MutationObserver","observe","node","childList","attributes","subtree","disconnect","cancel","focusable","find","forEach","nodeName","setAttribute","hasAttribute","removeAttribute","props","className","children"],"mappings":";;;;;;;;;;AAAA;;;AAGA,SAASA,QAAT,EAAmBC,QAAnB,QAAmC,QAAnC;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAEA;;;;AAGA,SAASC,aAAT,EAAwBC,SAAxB,QAAyC,oBAAzC;AACA,SAASC,KAAT,QAAsB,gBAAtB;;qBAE+BF,aAAa,CAAE,KAAF,C;IAApCG,Q,kBAAAA,Q;IAAUC,Q,kBAAAA,Q;AAElB;;;;;;;;;;;AASA,IAAMC,4BAA4B,GAAG,CACpC,QADoC,EAEpC,UAFoC,EAGpC,OAHoC,EAIpC,UAJoC,EAKpC,QALoC,EAMpC,QANoC,EAOpC,UAPoC,CAArC;;IAUMC,Q;;;;;AACL,sBAAc;AAAA;;AAAA;;AACb,mFAAUC,SAAV;AAEA,UAAKC,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,+BAAhB;AACA,UAAKC,OAAL,GAAe,MAAKA,OAAL,CAAaD,IAAb,+BAAf,CAJa,CAMb;AACA;;AACA,UAAKE,gBAAL,GAAwBb,QAAQ,CAAE,MAAKY,OAAP,EAAgB;AAAEE,MAAAA,OAAO,EAAE;AAAX,KAAhB,CAAhC;AARa;AASb;;;;wCAEmB;AACnB,WAAKF,OAAL;AAEA,WAAKG,QAAL,GAAgB,IAAIC,MAAM,CAACC,gBAAX,CAA6B,KAAKJ,gBAAlC,CAAhB;AACA,WAAKE,QAAL,CAAcG,OAAd,CAAuB,KAAKC,IAA5B,EAAkC;AACjCC,QAAAA,SAAS,EAAE,IADsB;AAEjCC,QAAAA,UAAU,EAAE,IAFqB;AAGjCC,QAAAA,OAAO,EAAE;AAHwB,OAAlC;AAKA;;;2CAEsB;AACtB,WAAKP,QAAL,CAAcQ,UAAd;AACA,WAAKV,gBAAL,CAAsBW,MAAtB;AACA;;;6BAESL,I,EAAO;AAChB,WAAKA,IAAL,GAAYA,IAAZ;AACA;;;8BAES;AACTf,MAAAA,KAAK,CAACqB,SAAN,CAAgBC,IAAhB,CAAsB,KAAKP,IAA3B,EAAkCQ,OAAlC,CAA2C,UAAEF,SAAF,EAAiB;AAC3D,YAAK1B,QAAQ,CAAEQ,4BAAF,EAAgCkB,SAAS,CAACG,QAA1C,CAAb,EAAoE;AACnEH,UAAAA,SAAS,CAACI,YAAV,CAAwB,UAAxB,EAAoC,EAApC;AACA;;AAED,YAAKJ,SAAS,CAACK,YAAV,CAAwB,UAAxB,CAAL,EAA4C;AAC3CL,UAAAA,SAAS,CAACM,eAAV,CAA2B,UAA3B;AACA;;AAED,YAAKN,SAAS,CAACK,YAAV,CAAwB,iBAAxB,CAAL,EAAmD;AAClDL,UAAAA,SAAS,CAACI,YAAV,CAAwB,iBAAxB,EAA2C,OAA3C;AACA;AACD,OAZD;AAaA;;;6BAEQ;AAAA,wBACwB,KAAKG,KAD7B;AAAA,UACAC,SADA,eACAA,SADA;AAAA,UACcD,KADd;;AAER,aACC,cAAC,QAAD;AAAU,QAAA,KAAK,EAAG;AAAlB,SACC;AACC,QAAA,GAAG,EAAG,KAAKtB,QADZ;AAEC,QAAA,SAAS,EAAGT,UAAU,CAAEgC,SAAF,EAAa,qBAAb;AAFvB,SAGMD,KAHN,GAKG,KAAKA,KAAL,CAAWE,QALd,CADD,CADD;AAWA;;;;EA7DqB/B,S;;AAgEvBK,QAAQ,CAACH,QAAT,GAAoBA,QAApB;AAEA,eAAeG,QAAf","sourcesContent":["/**\n * External dependencies\n */\nimport { includes, debounce } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { createContext, Component } from '@wordpress/element';\nimport { focus } from '@wordpress/dom';\n\nconst { Consumer, Provider } = createContext( false );\n\n/**\n * Names of control nodes which qualify for disabled behavior.\n *\n * See WHATWG HTML Standard: 4.10.18.5: \"Enabling and disabling form controls: the disabled attribute\".\n *\n * @see https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#enabling-and-disabling-form-controls:-the-disabled-attribute\n *\n * @type {string[]}\n */\nconst DISABLED_ELIGIBLE_NODE_NAMES = [\n\t'BUTTON',\n\t'FIELDSET',\n\t'INPUT',\n\t'OPTGROUP',\n\t'OPTION',\n\t'SELECT',\n\t'TEXTAREA',\n];\n\nclass Disabled extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.bindNode = this.bindNode.bind( this );\n\t\tthis.disable = this.disable.bind( this );\n\n\t\t// Debounce re-disable since disabling process itself will incur\n\t\t// additional mutations which should be ignored.\n\t\tthis.debouncedDisable = debounce( this.disable, { leading: true } );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.disable();\n\n\t\tthis.observer = new window.MutationObserver( this.debouncedDisable );\n\t\tthis.observer.observe( this.node, {\n\t\t\tchildList: true,\n\t\t\tattributes: true,\n\t\t\tsubtree: true,\n\t\t} );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.observer.disconnect();\n\t\tthis.debouncedDisable.cancel();\n\t}\n\n\tbindNode( node ) {\n\t\tthis.node = node;\n\t}\n\n\tdisable() {\n\t\tfocus.focusable.find( this.node ).forEach( ( focusable ) => {\n\t\t\tif ( includes( DISABLED_ELIGIBLE_NODE_NAMES, focusable.nodeName ) ) {\n\t\t\t\tfocusable.setAttribute( 'disabled', '' );\n\t\t\t}\n\n\t\t\tif ( focusable.hasAttribute( 'tabindex' ) ) {\n\t\t\t\tfocusable.removeAttribute( 'tabindex' );\n\t\t\t}\n\n\t\t\tif ( focusable.hasAttribute( 'contenteditable' ) ) {\n\t\t\t\tfocusable.setAttribute( 'contenteditable', 'false' );\n\t\t\t}\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst { className, ...props } = this.props;\n\t\treturn (\n\t\t\t<Provider value={ true }>\n\t\t\t\t<div\n\t\t\t\t\tref={ this.bindNode }\n\t\t\t\t\tclassName={ classnames( className, 'components-disabled' ) }\n\t\t\t\t\t{ ...props }\n\t\t\t\t>\n\t\t\t\t\t{ this.props.children }\n\t\t\t\t</div>\n\t\t\t</Provider>\n\t\t);\n\t}\n}\n\nDisabled.Consumer = Consumer;\n\nexport default Disabled;\n"]}