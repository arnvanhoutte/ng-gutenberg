{"version":3,"sources":["@wordpress/components/src/form-token-field/suggestions-list.js"],"names":["SuggestionsList","arguments","handleMouseDown","bind","bindList","props","selectedIndex","scrollIntoView","scrollingIntoView","list","children","onlyScrollIfNeeded","setTimeout","ref","suggestion","onHover","onSelect","e","preventDefault","match","displayTransform","toLocaleLowerCase","length","indexOfMatch","indexOf","suggestionBeforeMatch","substring","suggestionMatch","suggestionAfterMatch","instanceId","suggestions","index","computeSuggestionMatch","classeName","handleClick","handleHover","Component","defaultProps","Object","freeze"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { map } from 'lodash';\nimport scrollIntoView from 'dom-scroll-into-view';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { withSafeTimeout } from '@wordpress/compose';\n\nclass SuggestionsList extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.handleMouseDown = this.handleMouseDown.bind( this );\n\t\tthis.bindList = this.bindList.bind( this );\n\t}\n\n\tcomponentDidUpdate() {\n\t\t// only have to worry about scrolling selected suggestion into view\n\t\t// when already expanded\n\t\tif ( this.props.selectedIndex > -1 && this.props.scrollIntoView ) {\n\t\t\tthis.scrollingIntoView = true;\n\t\t\tscrollIntoView( this.list.children[ this.props.selectedIndex ], this.list, {\n\t\t\t\tonlyScrollIfNeeded: true,\n\t\t\t} );\n\n\t\t\tthis.props.setTimeout( () => {\n\t\t\t\tthis.scrollingIntoView = false;\n\t\t\t}, 100 );\n\t\t}\n\t}\n\n\tbindList( ref ) {\n\t\tthis.list = ref;\n\t}\n\n\thandleHover( suggestion ) {\n\t\treturn () => {\n\t\t\tif ( ! this.scrollingIntoView ) {\n\t\t\t\tthis.props.onHover( suggestion );\n\t\t\t}\n\t\t};\n\t}\n\n\thandleClick( suggestion ) {\n\t\treturn () => {\n\t\t\tthis.props.onSelect( suggestion );\n\t\t};\n\t}\n\n\thandleMouseDown( e ) {\n\t\t// By preventing default here, we will not lose focus of <input> when clicking a suggestion\n\t\te.preventDefault();\n\t}\n\n\tcomputeSuggestionMatch( suggestion ) {\n\t\tconst match = this.props.displayTransform( this.props.match || '' ).toLocaleLowerCase();\n\t\tif ( match.length === 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tsuggestion = this.props.displayTransform( suggestion );\n\t\tconst indexOfMatch = suggestion.toLocaleLowerCase().indexOf( match );\n\n\t\treturn {\n\t\t\tsuggestionBeforeMatch: suggestion.substring( 0, indexOfMatch ),\n\t\t\tsuggestionMatch: suggestion.substring( indexOfMatch, indexOfMatch + match.length ),\n\t\t\tsuggestionAfterMatch: suggestion.substring( indexOfMatch + match.length ),\n\t\t};\n\t}\n\n\trender() {\n\t\t// We set `tabIndex` here because otherwise Firefox sets focus on this\n\t\t// div when tabbing off of the input in `TokenField` -- not really sure\n\t\t// why, since usually a div isn't focusable by default\n\t\t// TODO does this still apply now that it's a <ul> and not a <div>?\n\t\treturn (\n\t\t\t<ul\n\t\t\t\tref={ this.bindList }\n\t\t\t\tclassName=\"components-form-token-field__suggestions-list\"\n\t\t\t\tid={ `components-form-token-suggestions-${ this.props.instanceId }` }\n\t\t\t\trole=\"listbox\"\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\tmap( this.props.suggestions, ( suggestion, index ) => {\n\t\t\t\t\t\tconst match = this.computeSuggestionMatch( suggestion );\n\t\t\t\t\t\tconst classeName = classnames( 'components-form-token-field__suggestion', {\n\t\t\t\t\t\t\t'is-selected': index === this.props.selectedIndex,\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t/* eslint-disable jsx-a11y/click-events-have-key-events */\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tid={ `components-form-token-suggestions-${ this.props.instanceId }-${ index }` }\n\t\t\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\t\t\tclassName={ classeName }\n\t\t\t\t\t\t\t\tkey={ suggestion }\n\t\t\t\t\t\t\t\tonMouseDown={ this.handleMouseDown }\n\t\t\t\t\t\t\t\tonClick={ this.handleClick( suggestion ) }\n\t\t\t\t\t\t\t\tonMouseEnter={ this.handleHover( suggestion ) }\n\t\t\t\t\t\t\t\taria-selected={ index === this.props.selectedIndex }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ match ?\n\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\t<span aria-label={ this.props.displayTransform( suggestion ) }>\n\t\t\t\t\t\t\t\t\t\t\t{ match.suggestionBeforeMatch }\n\t\t\t\t\t\t\t\t\t\t\t<strong className=\"components-form-token-field__suggestion-match\">\n\t\t\t\t\t\t\t\t\t\t\t\t{ match.suggestionMatch }\n\t\t\t\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t\t\t\t{ match.suggestionAfterMatch }\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t) :\n\t\t\t\t\t\t\t\t\tthis.props.displayTransform( suggestion )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t\t/* eslint-enable jsx-a11y/click-events-have-key-events */\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t</ul>\n\t\t);\n\t}\n}\n\nSuggestionsList.defaultProps = {\n\tmatch: '',\n\tonHover: () => {},\n\tonSelect: () => {},\n\tsuggestions: Object.freeze( [] ),\n};\n\nexport default withSafeTimeout( SuggestionsList );\n"]}